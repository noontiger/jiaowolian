<!-- wrong-questions.wxml -->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <text class="page-title">é”™é¢˜æœ¬</text>
    <view class="clear-btn" bindtap="clearWrongQuestions" wx:if="{{!isEmpty && !loading}}">
      <text>æ¸…ç©º</text>
    </view>
  </view>
  
  <!-- åŠ è½½ä¸­ -->
  <view class="loading" wx:if="{{loading}}">
    <view class="loading-icon"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
  
  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{isEmpty && !loading}}">
    <view class="empty-icon">ğŸ“</view>
    <text class="empty-text">æš‚æ— é”™é¢˜è®°å½•</text>
    <text class="empty-desc">åšé¢˜æ—¶çš„é”™é¢˜ä¼šè‡ªåŠ¨è®°å½•åˆ°è¿™é‡Œå“¦</text>
  </view>
  
  <!-- é”™é¢˜åˆ—è¡¨ -->
  <view class="question-list" wx:if="{{!isEmpty && !loading}}">
    <view class="list-item" wx:for="{{wrongQuestions}}" wx:key="id">
      <view class="item-header">
        <view class="item-tags">
          <text class="tag">{{item.subject}}</text>
          <text class="tag" wx:for="{{item.tags}}" wx:key="*this" wx:for-item="tag">{{tag}}</text>
        </view>
        <text class="item-date">{{item.addTime}}</text>
      </view>
      
      <view class="item-content" bindtap="goToQuestion" data-id="{{item.id}}">
        <text class="item-title">{{item.title}}</text>
        
        <!-- é€‰æ‹©é¢˜é€‰é¡¹ -->
        <view class="item-options" wx:if="{{item.type === 'choice'}}">
          <view class="option-row {{item.userAnswer === option.id ? 'user-selected' : ''}} {{item.correctAnswer === option.id ? 'correct' : ''}}" 
                wx:for="{{item.options}}" wx:key="id" wx:for-item="option">
            <text class="option-letter">{{option.id}}</text>
            <text class="option-text">{{option.text}}</text>
          </view>
        </view>
        
        <!-- å¡«ç©ºé¢˜/è§£ç­”é¢˜ -->
        <view class="item-answer" wx:if="{{item.type === 'fill' || item.type === 'essay'}}">
          <view class="answer-row">
            <text class="answer-label">ä½ çš„ç­”æ¡ˆï¼š</text>
            <text class="answer-content user-answer">{{item.userAnswer}}</text>
          </view>
          <view class="answer-row">
            <text class="answer-label">æ­£ç¡®ç­”æ¡ˆï¼š</text>
            <text class="answer-content correct-answer">{{item.correctAnswer}}</text>
          </view>
        </view>
      </view>
      
      <view class="item-actions">
        <view class="action-btn delete" bindtap="deleteQuestion" data-id="{{item.id}}">
          <text>åˆ é™¤</text>
        </view>
      </view>
    </view>
  </view>
</view>